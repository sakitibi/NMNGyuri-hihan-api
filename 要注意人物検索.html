<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>要注意人物検索</title>
  <link rel="shortcut icon" href="https://yt3.googleusercontent.com/X-dQgQR-PcT6QlUk40bm_QuLDvbyBWyUf_6DP5RShb7w666ZW0mzlUlh7DkEehp3av9a3H6M2Jw=s160-c-k-c0x00ffffff-no-rj"/>
  <style>
    html{
      background-color: #21bb5c;
      text-align: center;
    }

	button{
	    padding: 10px 20px;
	    font-size: 16px;
	    margin: 10px;
	    cursor: pointer;
	    border: none;
	    border-radius: 5px;
	    color: #ffffff;
	    background-color: #002aff;
	    transition: background-color 0.3s;
	}

	button:hover{
	    background-color: #002b9c;
	}

	button[aria-disabled="true"] {
	    cursor: not-allowed;
	    opacity: 0.5;
	}
	
	button:not([aria-disabled]) {
	    cursor: pointer;
	}
	
	button[disabled] {
	    cursor: not-allowed;
	    opacity: 0.5;
	}
  </style>
</head>
<body>
  <h1>要注意人物リスト検索</h1>
  <input type="text" id="searchInput" placeholder="ユーザー名を入力">
  <button onclick="searchUser()">検索</button>
  <div id="result"></div>
  <script>
    let jsonData = {};

    // JSONを取得
    async function fetchData() {
      const response = await fetch("./manifest/youchuuijinbutsulist.json");
      jsonData = await response.json();
    }

    // 検索処理
	function searchUser() {
	  const keyword = document.getElementById("searchInput").value.trim();
	  const resultDiv = document.getElementById("result");
	  resultDiv.innerHTML = "";
	
	  let found = false;
	
	  for (const category in jsonData) {
	    for (const id in jsonData[category]) {
	      const entry = jsonData[category][id];
	
	      // 検索対象のフィールド一覧
	      const fieldsToCheck = [
	        "username", "friend-code", "network-id", "browser-id", "ipaddress",
	        "cookie", "Hostname", "UA", "email", "youtube-name", "x-name", "amongus-username"
	      ];
	
	      const match = fieldsToCheck.some(field => {
	        const value = entry[field];
	        if (!value) return false;
	        if (Array.isArray(value)) {
	          return value.some(v => v && v.includes(keyword));
	        }
	        return typeof value === "string" && value.includes(keyword);
	      });
	
	      if (match) {
	        found = true;
	        const usernames = Array.isArray(entry.username) ? entry.username.join(", ") : entry.username || "不明";
		const friendcode = Array.isArray(entry["friend-code"]) ? entry["friend-code"].join(", ") : entry["friend-code"] || "なし";
		const email = Array.isArray(entry.email) ? entry.email.join(", ") : entry.email || "なし";
	        const riyuu = Array.isArray(entry.riyuu) ? entry.riyuu.join(" / ") : entry.riyuu || "不明";
	        const taisaku = Array.isArray(entry.taisaku) ? entry.taisaku.join(" / ") : entry.taisaku || "なし";
	
	        resultDiv.innerHTML += `
	          <h3>カテゴリ: ${category}</h3>
	          <p><strong>ユーザー名:</strong> ${usernames}</p>
	   	  <p><strong>フレンドコード:</strong> ${friendcode}</p>
	          <p><strong>理由:</strong> ${riyuu}</p>
	          <p><strong>対策:</strong> ${taisaku}</p>
	          <hr>
	        `;
	      }
	    }
	  }
	
	  if (!found) {
	    resultDiv.innerHTML = "<p>該当する情報は見つかりませんでした。</p>";
	  }
	}

    // 初期データ取得
    fetchData();
  </script>
</body>
</html>
